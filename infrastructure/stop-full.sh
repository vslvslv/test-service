#!/bin/bash

# ============================================================================
# Test Service - Stop Full Stack (Linux/macOS)
# ============================================================================

GREEN='\033[0;32m'
RED='\033[0;31m'
NC='\033[0m'

echo ""
echo "??????????????????????????????????????????????????????????????????"
echo "?         Test Service - Stopping Full Stack                    ?"
echo "??????????????????????????????????????????????????????????????????"
echo ""

# Determine compose command
if command -v docker-compose &> /dev/null; then
    COMPOSE_CMD="docker-compose"
else
    COMPOSE_CMD="docker compose"
fi

echo "Stopping all services..."
$COMPOSE_CMD -f infrastructure/docker-compose.yml down

if [ $? -eq 0 ]; then
    echo -e "${GREEN}? All services stopped successfully${NC}"
else
    echo -e "${RED}? Failed to stop services${NC}"
fi

echo ""
echo "To remove data volumes as well:"
echo "  $COMPOSE_CMD -f infrastructure/docker-compose.yml down -v"
echo ""
