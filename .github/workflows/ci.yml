name: CI/CD Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  # Temporarily disabled - keeping only GitHub Pages deployment
  # Uncomment below to re-enable API/Web CI and Docker builds

  # test-api:
  #   name: Test API
  #   uses: ./.github/workflows/api-ci.yml
  # 
  # test-web:
  #   name: Test Web
  #   uses: ./.github/workflows/web-ci.yml
  #
  # build-docker:
  #   name: Build & Push Docker Images
  #   needs: [test-api, test-web]
  #   if: github.event_name == 'push' && github.ref == 'refs/heads/main'
  #   uses: ./.github/workflows/docker-build-and-push.yml
  #   secrets: inherit

  # Placeholder job so workflow doesn't fail
  skip-ci:
    name: Skipping CI (GitHub Pages only mode)
    runs-on: ubuntu-latest
    steps:
      - run: echo "Running in GitHub Pages only mode. CI jobs disabled."

  # Uncomment the deployment you want to use:
  
  # deploy-kubernetes:
  #   name: Deploy to Kubernetes
  #   needs: [build-docker]
  #   if: github.event_name == 'push' && github.ref == 'refs/heads/main'
  #   uses: ./.github/workflows/deploy-k8s.yml
  #   secrets: inherit
  
  # deploy-azure:
  #   name: Deploy to Azure
  #   needs: [build-docker]
  #   if: github.event_name == 'push' && github.ref == 'refs/heads/main'
  #   uses: ./.github/workflows/deploy-azure.yml
  #   secrets: inherit
  
  # deploy-aws:
  #   name: Deploy to AWS
  #   needs: [build-docker]
  #   if: github.event_name == 'push' && github.ref == 'refs/heads/main'
  #   uses: ./.github/workflows/deploy-aws.yml
  #   secrets: inherit
